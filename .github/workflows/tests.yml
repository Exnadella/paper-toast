name: tests

on: [push, pull_request]

jobs:
  wct-local:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-node@v1
      with:
        node-version: 14

    - name: Install the Polymer CLI
      run: npm install -g polymer-cli

    - name: Install NPM dependencies
      run: npm ci

    - name: Check formatting
      run: >-
        npm run format && git diff --exit-code || (echo -e
        '\n\033[31mERROR:\033[0m Project is not formatted. Please run "npm run
        format".' && false)

    - name: Test in local browsers (Chrome/Firefox)
      run: polymer test --module-resolution=node --npm
